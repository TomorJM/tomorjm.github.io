<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  
  
  
  
  
  <link rel="prev" href="http://www.tomorjm.com/xcodeproj-2/" />
  <link rel="next" href="http://www.tomorjm.com/learn-graphql-java/" />
  <link rel="canonical" href="http://www.tomorjm.com/ios-multi-language/" />
  <link rel='shortcut icon' type='image/x-icon' href='/favicon.ico' />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           iOSåº”ç”¨å†…å¤šè¯­è¨€åˆ‡æ¢çš„å¥‡æ€å¦™æƒ³ | TomorJM - Love and Share.
       
  </title>
  <meta name="title" content="iOSåº”ç”¨å†…å¤šè¯­è¨€åˆ‡æ¢çš„å¥‡æ€å¦™æƒ³ | TomorJM - Love and Share.">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="iOSåº”ç”¨å†…å¤šè¯­è¨€åˆ‡æ¢çš„å¥‡æ€å¦™æƒ³"/>
<meta name="twitter:description" content="å‰è¨€ å¦‚ä»Š,è®¸å¤šåº”ç”¨ä¹Ÿå˜å¾—æ›´åŠ äººæ€§åŒ–,è€ƒè™‘åˆ°å›½é™…å‹äººçš„éœ€è¦,æ·»åŠ äº†å›½é™…åŒ–å¤šè¯­è¨€çš„å¤„ç†ã€‚åŒæ—¶ä¹Ÿæœ‰è®¸å¤šåº”ç”¨å¦‚ç½‘æ˜“é‚®ç®±å¤§å¸ˆã€æ”¯ä»˜å®ã€å¾®ä¿¡ç­‰ä¸ºäº†æ»¡è¶³éƒ¨"/>

  <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "iOSåº”ç”¨å†…å¤šè¯­è¨€åˆ‡æ¢çš„å¥‡æ€å¦™æƒ³",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http:\/\/www.tomorjm.com\/ios-multi-language\/"
  },
  "image": {
    "@type": "ImageObject",
    "url": "http:\/\/www.tomorjm.com\/cover.png",
    "width":  800 ,
    "height":  600 
  },
  "genre": "posts",
  
  "wordcount":  5559 ,
  "url": "http:\/\/www.tomorjm.com\/ios-multi-language\/",
  "datePublished": "2016-11-15T00:00:00\x2b00:00",
  "dateModified": "2016-11-15T00:00:00\x2b00:00",
  
  "publisher": {
    "@type": "Organization",
    "name": "Fastbyte01",
    "logo": {
      "@type": "ImageObject",
      "url": "http:\/\/www.tomorjm.com\/logo.png",
      "width":  127 ,
      "height":  40 
    }
  },
  "author": {
    "@type": "Person",
    "name": "Fastbyte01"
  },
  "description": ""
}
</script>
</head>

  



  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    
        <div class="top-scroll-bar"></div>
    
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="http://www.tomorjm.com">TomorJM - Love and Share.</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/list/" title="">ğŸ“–</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
    
        <div class="top-scroll-bar"></div>
    
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-sun"></i></a>&nbsp;<a href="http://www.tomorjm.com">TomorJM - Love and Share.</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/list/" title="">ğŸ“–</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
        </div>
    </div>
</nav>

    	 <main class="main">
          <div class="container">
      		
<article class="post-warp">
    <header class="post-header">
        <h1 class="post-title">iOSåº”ç”¨å†…å¤šè¯­è¨€åˆ‡æ¢çš„å¥‡æ€å¦™æƒ³</h1>
        <div class="post-meta">
            Written by <a href="http://www.tomorjm.com" rel="author">JaimeZhang</a> with â™¥ 
                <span class="post-time">
                    on <time datetime=2016-11-15 >15 November 2016</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="http://www.tomorjm.com/categories/%E6%8A%80%E6%9C%AF/"> æŠ€æœ¯ </a>
                        
                </span>
                <i class="iconfont icon-timer"></i>
                12 min
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          

<h2 id="å‰è¨€">å‰è¨€</h2>

<p>å¦‚ä»Š,è®¸å¤šåº”ç”¨ä¹Ÿå˜å¾—æ›´åŠ äººæ€§åŒ–,è€ƒè™‘åˆ°å›½é™…å‹äººçš„éœ€è¦,æ·»åŠ äº†å›½é™…åŒ–å¤šè¯­è¨€çš„å¤„ç†ã€‚åŒæ—¶ä¹Ÿæœ‰è®¸å¤šåº”ç”¨å¦‚ç½‘æ˜“é‚®ç®±å¤§å¸ˆã€æ”¯ä»˜å®ã€å¾®ä¿¡ç­‰ä¸ºäº†æ»¡è¶³éƒ¨åˆ†ç”¨æˆ·çš„éœ€æ±‚,æ·»åŠ äº†åº”ç”¨å†…å¤šè¯­è¨€åˆ‡æ¢çš„åŠŸèƒ½,ä½¿å¾—ç”¨æˆ·å¯ä»¥ä¸é€šè¿‡è®¾ç½®ç³»ç»Ÿè¯­è¨€éšå¿ƒæ‰€æ¬²å¾—åˆ‡æ¢åº”ç”¨å†…è¯­è¨€ã€‚é‚£ä¹ˆè¿™ç§ä¸é‡å¯Appå°±éšæ„åˆ‡æ¢åº”ç”¨è¯­è¨€çš„åŠŸèƒ½æ˜¯å¦‚ä½•å®ç°çš„å‘¢?æœ¬æ–‡å°†å¯¹
è¿™ä¸€é—®é¢˜è¿›è¡Œæ¢è®¨ã€‚</p>

<h2 id="ç³»ç»Ÿå®ç°å¤šè¯­è¨€çš„è¿‡ç¨‹">ç³»ç»Ÿå®ç°å¤šè¯­è¨€çš„è¿‡ç¨‹</h2>

<ul>
<li>iOSç³»ç»Ÿé¦–å…ˆæœç´¢ç”¨æˆ·çš„è¯­è¨€åå¥½è®¾ç½®(è®¾ç½®-é€šç”¨-è¯­è¨€ä¸åœ°åŒº)</li>
<li>æ£€æµ‹ä½ çš„åº”ç”¨æ˜¯å¦æ”¯æŒç”¨æˆ·çš„è¯­è¨€ï¼Œå…ˆç”¨åå¥½è®¾ç½®(NSUserdefault)çš„ç¬¬ä¸€ä¸ªè¯­è¨€ï¼Œæ£€æµ‹åº”ç”¨æ˜¯å¦åŒ…å«è¯¥è¯­è¨€å¯¹åº”çš„æ–‡ä»¶å¤¹(åç¼€æ˜¯.lprojï¼Œæ–‡ä»¶åéƒ¨åˆ†ï¼Œè‹±è¯­ä¸ºenï¼Œä¸­æ–‡ç®€ä½“ä¸ºzh-Hans)å¦‚æœå­˜åœ¨ï¼Œé‚£å°±æ˜¯è¯¥è¯­è¨€ï¼Œå¦åˆ™ç”¨åå¥½è®¾ç½®ç¬¬äºŒä¸ªè¯­è¨€æ¥åŒ¹é…ã€‚é‡å¤è¯¥è¿‡ç¨‹ã€‚</li>
<li>ä¸€æ—¦ç³»ç»Ÿä¸ºåº”ç”¨ç¡®å®šäº†è¯­è¨€ï¼Œå¯¹åº”çš„<code>.lproj</code>æ–‡ä»¶å¤¹å°±ä¼šç”¨ä½œæœ¬åœ°åŒ–èµ„æº</li>
</ul>

<h2 id="æ¢ç©¶è¿‡ç¨‹">æ¢ç©¶è¿‡ç¨‹</h2>

<p>å¤§å¤šæ•°Appè‡ªå®šä¹‰çš„å›½é™…åŒ–æ–‡ä»¶ä½¿ç”¨<code>localizable.string</code>,å¹¶ä¸”åœ¨ä»£ç é‡Œä½¿ç”¨<code>NSLocalizedString(key, comment)</code>è¿›è¡Œå›½é™…åŒ–æ–‡æ¡ˆå¤„ç†,é‚£ä¹ˆå›½é™…åŒ–çš„æ–‡å­—åˆ™å®Œå…¨æ ¹æ®ç³»ç»Ÿè¯­è¨€æ‰§è¡Œã€‚è¿™ä¸ªæ—¶å€™å¦‚æœéœ€è¦å®ç°åº”ç”¨å†…çš„å›½é™…åŒ–å¤šè¯­è¨€åˆ‡æ¢,å°±éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚</p>

<h3 id="æ–¹æ¡ˆä¸€-æš´åŠ›ä¿®æ”¹nsuserdefaultä¸­çš„å€¼">æ–¹æ¡ˆä¸€: æš´åŠ›ä¿®æ”¹NSUserDefaultä¸­çš„å€¼</h3>

<p>å†æ„ä¸€çœ¼ä¸Šé¢è¯´åˆ°çš„ç³»ç»Ÿå›½é™…åŒ–å¤šè¯­è¨€çš„å®ç°è¿‡ç¨‹,æ—¢ç„¶iOSç³»ç»Ÿé»˜è®¤ä¼šé€‰æ‹©<code>NSUserdefault</code>å¯¹åº”æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºè¯­è¨€çš„é€‰æ‹©,é‚£ä¹ˆæˆ‘å°è¯•å°†è¯¥æ•°ç»„ä¸­çš„å…ƒç´ è°ƒæ•´ä¸‹ä½ç½®,çœ‹ä¸‹æ˜¯å¦å¯è¡Œ?</p>

<p>æˆ‘ä»¬å…ˆåœ¨demoä¸­æå‰åšä¸€ä¸‹åŸºæœ¬çš„å¤šè¯­è¨€æœ¬åœ°åŒ–çš„å¤„ç†(å‡†å¤‡å·¥ä½œ)ã€‚</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://qn.tomorjm.com/%E5%9B%BE1.png" alt="ä»£ç å›½é™…åŒ–èµ„æº" class="lazyload"><figcaption class="image-caption">ä»£ç å›½é™…åŒ–èµ„æº</figcaption></figure></p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://qn.tomorjm.com/xib%E5%9B%BD%E9%99%85%E5%8C%96.png" alt="xibå›½é™…åŒ–èµ„æº" class="lazyload"><figcaption class="image-caption">xibå›½é™…åŒ–èµ„æº</figcaption></figure></p>

<p>ç•Œé¢ä¸Šæ‰€æœ‰çš„å›½é™…åŒ–æ–‡æ¡ˆ(ä»£ç å’Œxib)å·²ç»å°±ä½,é‚£ä¹ˆå¼€å§‹æ•´èµ·ã€‚</p>

<p>ä¸»ç•Œé¢å¦‚å›¾:</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://qn.tomorjm.com/%E4%B8%BB%E7%95%8C%E9%9D%A2%E4%B8%AD%E6%96%87.png" alt="ä¸»ç•Œé¢-ä¸­æ–‡" class="lazyload"><figcaption class="image-caption">ä¸»ç•Œé¢-ä¸­æ–‡</figcaption></figure></p>

<p>é¦–å…ˆä¸»ç•Œé¢ä¸Šæœ‰ä¸¤ä¸ª<code>button</code>,ä¸Šé¢çš„<code>button</code>æ˜¯ä»£ç è¿›è¡Œåˆå§‹åŒ–çš„(å¦‚ä¸‹),æ‰€ä»¥ç›¸åº”å›½é™…åŒ–æ–‡æ¡ˆçš„åŠ è½½ä½äº<code>Localizable.strings</code></p>

<pre><code class="language-objc">//  ViewController.m
[self.changeBtn setTitle:NSLocalizedString(@&quot;é‚®ç®±å¤§å¸ˆ&quot;, @&quot;&quot;) forState:UIControlStateNormal];
</code></pre>

<p>ä¸‹é¢çš„<code>button</code>è·Ÿéš<code>é»„è‰²view</code>åœ¨<code>xib</code>ä¸­è¿›è¡Œåˆå§‹åŒ–(å¦‚ä¸‹),æ‰€ä»¥ç›¸åº”å›½é™…åŒ–æ–‡æ¡ˆçš„åŠ è½½ä½äº<code>TestView.strings</code></p>

<pre><code class="language-objc">/* Class = &quot;UIButton&quot;; normalTitle = &quot;Button&quot;; ObjectID = &quot;Sic-kz-b1y&quot;; */
&quot;Sic-kz-b1y.normalTitle&quot; = &quot;é‚®ç®±å¤§å¸ˆ_xib&quot;;
</code></pre>

<p>ä¸‹é¢çš„è®¨è®ºæˆ‘ä»¬é‡ç‚¹å…³å¿ƒè¿™ä¸¤ä¸ª<code>button</code>çš„å›½é™…åŒ–æ–‡æ¡ˆå˜åŒ–ã€‚</p>

<p>åœ¨<code>- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent*)event</code>ä¸­æ·»åŠ äº†ä»¥ä¸‹å†…å®¹</p>

<pre><code class="language-objc">// Viewcontroller.m
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent*)event
{
    NSUserDefaults *userDefault = [NSUserDefaults standardUserDefaults];
    NSArray* languages = [userDefault objectForKey:@&quot;AppleLanguages&quot;];
    NSString *current = [languages objectAtIndex:0];
    NSLog(@&quot;æ”¯æŒçš„è¯­è¨€:%@,å½“å‰è¯­è¨€:%@&quot;,languages,current);
}
</code></pre>

<p>ç‚¹å‡»ç©ºç™½å¤„,æ‰“å°å¦‚ä¸‹:</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://qn.tomorjm.com/%E5%9B%BE5.png" alt="ä¸­æ–‡ç‚¹å‡»ç©ºç™½å¤„" class="lazyload"><figcaption class="image-caption">ä¸­æ–‡ç‚¹å‡»ç©ºç™½å¤„</figcaption></figure></p>

<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°†ç³»ç»Ÿåˆ‡æ¢ä¸ºè‹±æ–‡,é‡æ–°å¯åŠ¨App
ä¸»ç•Œé¢æ–‡æ¡ˆå’Œç‚¹å‡»ç©ºç™½å¤„æ‰“å°å¦‚ä¸‹:</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://qn.tomorjm.com/%E4%B8%BB%E7%95%8C%E9%9D%A2%E8%8B%B1%E6%96%87.png" alt="ä¸»ç•Œé¢-è‹±æ–‡" class="lazyload"><figcaption class="image-caption">ä¸»ç•Œé¢-è‹±æ–‡</figcaption></figure>
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://qn.tomorjm.com/%E5%9B%BE3.png" alt="ç‚¹å‡»ç©ºç™½å¤„" class="lazyload"><figcaption class="image-caption">ç‚¹å‡»ç©ºç™½å¤„</figcaption></figure></p>

<p>æ ¹æ®æ‰“å°æƒ…å†µ,ç¡®å®æ˜¯è¿™æ ·çš„,<code>NSUserDefaults</code>ä¸­çš„<code>AppleLanguages</code>æ•°ç»„ä¸­çš„<code>ç¬¬ä¸€ä¸ªå…ƒç´ å€¼</code>è·Ÿç³»ç»Ÿè¯­è¨€ç›¸åŒ,å¹¶ä¸”å†³å®šç€å½“å‰åº”ç”¨çš„é»˜è®¤è¯­è¨€ã€‚</p>

<p>è¿™å’Œæˆ‘ä»¬çŒœæµ‹åˆ°çš„æƒ…å†µç›¸åŒ,é‚£ä¹ˆæ¢å›è‹±æ–‡ç³»ç»Ÿ,å¼€å§‹åŠ¨åˆ€!</p>

<p>è¿™é‡Œæˆ‘ä»¬åˆæ·»åŠ ä¸€ä¸ª<code>SettingViewController</code>,å¦‚ä¸‹</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://qn.tomorjm.com/%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2.png" alt="è®¾ç½®ç•Œé¢-ä¸­æ–‡" class="lazyload"><figcaption class="image-caption">è®¾ç½®ç•Œé¢-ä¸­æ–‡</figcaption></figure></p>

<p>åœ¨è¿™ä¸ª<code>SettingViewController</code>ä¸­æœ‰ä¸¤ä¸ªæŒ‰é’®,ä¸Šé¢æ˜¯<code>ä¸­æ–‡è®¾ç½®æŒ‰é’®</code>,ä¸‹é¢æ˜¯<code>è‹±æ–‡è®¾ç½®æŒ‰é’®</code>,æˆ‘ä»¬åˆ†åˆ«åœ¨è¿™ä¸¤ä¸ªæŒ‰é’®ä¸­æ·»åŠ å¦‚ä¸‹æ–¹æ³•</p>

<pre><code class="language-objc">// SettingViewController.m
// åˆ‡æ¢ä¸ºä¸­æ–‡
- (void)chineseClicked {
    NSUserDefaults *userDefault = [NSUserDefaults standardUserDefaults];
    NSArray* languages = [userDefault objectForKey:@&quot;AppleLanguages&quot;];
    NSMutableArray *arrM = [languages mutableCopy];
    arrM[0] = @&quot;zh-Hans-US&quot;; // å¼ºåˆ¶é‡æ–°æ›´æ¢ä¸€ä¸ªæ–°çš„æ•°ç»„,æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºä¸­æ–‡
    [userDefault setObject:arr forKey:@&quot;AppleLanguages&quot;];
    // é‡ç½®rootViewController,è¾¾åˆ°é‡å¯appçš„ç›®çš„
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    [delegate resetMainVC];
}
// åˆ‡æ¢ä¸ºè‹±æ–‡
- (void)englishClicked {
    NSUserDefaults *userDefault = [NSUserDefaults standardUserDefaults];
    NSArray* languages = [userDefault objectForKey:@&quot;AppleLanguages&quot;];
    NSMutableArray *arrM = [languages mutableCopy];
    arrM[0] = @&quot;en-US&quot;; // å¼ºåˆ¶é‡æ–°æ›´æ¢ä¸€ä¸ªæ–°çš„æ•°ç»„,æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºè‹±æ–‡
    [userDefault setObject:arr forKey:@&quot;AppleLanguages&quot;];
    // é‡ç½®rootViewController,è¾¾åˆ°é‡å¯appçš„ç›®çš„
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    [delegate resetMainVC];
}
</code></pre>

<p>ç³»ç»Ÿä¸ºè‹±æ–‡æƒ…å†µä¸‹,è¿è¡Œapp,å¹¶æµ‹è¯•ã€‚</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://qn.tomorjm.com/%E4%B8%AD%E8%8B%B1%E6%96%87%E5%88%87%E6%8D%A2%E6%AD%A3%E5%B8%B8.gif" alt="æš´åŠ›åˆ‡æ¢" class="lazyload"><figcaption class="image-caption">æš´åŠ›åˆ‡æ¢</figcaption></figure></p>

<p>è¿™æ—¶æˆ‘ä»¬ä¼šæƒŠå¥‡å¾—å‘ç°,è¯­è¨€å¯ä»¥éšæ„åˆ‡æ¢å¹¶ä¸”<code>UserDefault</code>ä¸­çš„<code>AppleLanguages</code>æ•°ç»„è¢«å®Œå…¨æ”¹å˜æˆæˆ‘ä»¬è‡ªå·±æƒ³è¦çš„äº†,è€Œä¸”åº”ç”¨çš„é»˜è®¤è¯­è¨€ä¹Ÿæ”¹å˜æˆäº†æˆ‘ä»¬æƒ³è¦çš„ä¸­æ–‡!</p>

<p>ä½†æ˜¯è¿™ç§çŠ¶æ€èƒ½ä¸èƒ½ç»´æŒè¿˜éœ€è¦é¢å¤–çš„æ£€æŸ¥,ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦åœ¨å„ç§åœºæ™¯ä¸‹æ£€æµ‹<code>AppleLanguages</code>åˆæœ‰æ²¡æœ‰è¢«ç³»ç»Ÿé»˜è®¤é‡ç½®å›å»ã€‚</p>

<p>ç»è¿‡æµ‹è¯•å‘ç°,æ›´æ¢ç³»ç»Ÿè¯­è¨€,æ˜¯ä¸ä¼šå†æ¬¡å½±å“è¿™ä¸ªæ•°ç»„çš„å€¼,é™¤éä½ å†æ¬¡é€šè¿‡åŒæ ·çš„æ–¹æ³•è¿›è¡Œæ›¿æ¢æˆ–è€…ç›´æ¥å¸è½½é‡è£…åº”ç”¨ã€‚ä½†æ˜¯è¿™å¹¶ä¸èƒ½ä¿è¯å…¶ä»–çš„æµç¨‹èƒ½å¦é‡ç½®è¿™ä¸ªå€¼,è‹¹æœå®˜æ–¹ä¹Ÿæ²¡æœ‰ç¡®å®šçš„è¯´æ˜ã€‚</p>

<p>æ€»ç»“: è¿™ç§ç®€å•ç²—æš´æ›¿æ¢çš„æ–¹æ¡ˆåŸç†ä¸Šæ˜¯å¯è¡Œçš„,ä½†æ˜¯æ²¡æœ‰trickçš„ç‚¹,è€Œä¸”ç”±äºæ˜¯ç›´æ¥åŠ¨åˆ€ç³»ç»Ÿé»˜è®¤é…ç½®,è¿™å°±å¯èƒ½é€ æˆä¸€äº›æœªçŸ¥çš„bugå‘ç”Ÿ,ä¸æ¨èä½¿ç”¨ã€‚</p>

<h3 id="æ–¹æ¡ˆäºŒ-æ›¿æ¢ç³»ç»Ÿå®">æ–¹æ¡ˆäºŒ: æ›¿æ¢ç³»ç»Ÿå®</h3>

<p>ä¸ºä»€ä¹ˆè¦æ›¿æ¢ç³»ç»Ÿçš„å®å‘¢?</p>

<p>é¦–å…ˆæˆ‘ä»¬è·³è¿›<code>NSLocalizedString</code>çš„å››ä¸ªç›¸å…³å®ç³»ç»Ÿä¸ºå…¶å®šä¹‰çš„åœ°æ–¹,å‘ç°è·³è¿›äº†<code>NSBundle.h</code>æ–‡ä»¶,å…¶å®šä¹‰å¦‚ä¸‹:</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://qn.tomorjm.com/%E5%9B%BE7.png" alt="å›¾8" class="lazyload"><figcaption class="image-caption">å›¾8</figcaption></figure></p>

<p>ä¸Šé¢ä¸¤ä¸ªå®æœ€ç»ˆä¼šè°ƒç”¨æŒ‡å®š<code>NSBundle.mainBundle</code>çš„<code>localizedStringForKey</code>æ–¹æ³•,è€Œä¸‹é¢çš„å®åˆ™å¯ä»¥æŒ‡å®šbundle,æŒ‡å®šæ–‡ä»¶ã€‚</p>

<p>ä¸‹é¢ä¸¤ç§å®çš„ä½¿ç”¨éƒ½easy,å› ä¸ºä½ å®Œå…¨å¯ä»¥æ ¹æ®æŒ‡å®šä¸åŒè¯­è¨€çš„<code>bundle</code>æ–‡ä»¶å…¶åŠ è½½å¤šè¯­è¨€æ–‡æ¡ˆ,ä½†æ˜¯å¦‚æœåœ¨å·²æœ‰é¡¹ç›®ä¸­å¤§é‡ä½¿ç”¨äº†ä¸Šé¢çš„ä¸¤ç§å®,å¹¶ä¸”åˆ†æ•£åœ¨å„ä¸ªæ–‡ä»¶ä¸­
é‚£å°±ä¼šéå¸¸å¤´ç–¼,å› ä¸ºä½ æ²¡æœ‰å…·ä½“æŒ‡å®šæ˜¯å“ªä¸ªè¯­è¨€çš„æ–‡ä»¶,å› ä¸ºæ­¤æ—¶çš„æ–‡ä»¶ç³»ç»Ÿä¸­å­˜åœ¨è¿™æ ·çš„ç»“æ„:</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://qn.tomorjm.com/%E5%9B%BE8.png" alt="å›¾9" class="lazyload"><figcaption class="image-caption">å›¾9</figcaption></figure></p>

<p>å¯ä»¥çŒœæµ‹åˆ°çš„æ˜¯,å¦‚æœä¸å…·ä½“æŒ‡å®šæ–‡ä»¶çš„è¯,é‚£ä¹ˆç³»ç»Ÿé»˜è®¤ä¼šåœ¨<code>mainBundle</code>ä¸­æ ¹æ®æ–¹æ¡ˆä¸€ä¸­çš„<code>UserDefault</code>çš„å¯¹åº”å€¼å»æŸ¥æ‰¾ä½¿ç”¨,é‚£ä¹ˆåº”ç”¨è¯­è¨€è¿˜æ˜¯ä¼šè·Ÿç€ç³»ç»Ÿèµ°ã€‚
æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ªåœ°æ–¹åŠ¨ç‚¹æ‰‹è„š,å¯¹ç³»ç»Ÿå®è¿›è¡Œå¤„ç†,åœ¨ä¸æ”¹å˜é¡¹ç›®ä¸­å·²æœ‰ä»£ç çš„æƒ…å†µä¸‹,å®ç°è‡ªç”±åˆ‡æ¢ã€‚ç”±æ­¤,å¯ä»¥æƒ³åˆ°çš„è§£å†³æ€è·¯å°±æ˜¯<code>å®æ›¿æ¢</code>ã€‚</p>

<p>ç»§ç»­æ‹¿åˆ°<code>æ–¹æ¡ˆä¸€</code>ä¸­çš„å·¥ç¨‹(ç³»ç»Ÿä¸ºè‹±æ–‡),å¼€å§‹æˆ‘ä»¬çš„è®¾è®¡ã€‚å°±æ‹¿ç¬¬ä¸€ä¸ªå®<code>NSLocalizedString(key, comment)</code>ä¸¾ä¾‹,åœ¨ä¸»ç•Œé¢controllerä¸­,è¿›è¡Œä»¥ä¸‹æ“ä½œ</p>

<pre><code class="language-objc">// ViewController.m
...
#undef NSLocalizedString
#define NSLocalizedString(key, comment) \
[self localizedStringForKey:(key)]
...
- (NSString *)localizedStringForKey:(NSString *)key
{
    return  [[self customLanguageBundle] localizedStringForKey:(key) value:@&quot;&quot; table:nil];
}

- (NSBundle *)customLanguageBundle
{
    NSBundle *bundle = [NSBundle mainBundle];
    NSString *currentLanguage = [[NSUserDefaults standardUserDefaults] objectForKey:@&quot;NEAppLanguage&quot;]; // ä»å­˜å‚¨ä¸­å–å€¼
    NSString *path = [bundle pathForResource:currentLanguage ofType:@&quot;lproj&quot;];
    if (path) {
        bundle = [NSBundle bundleWithPath:path];
    }
    return bundle;
}
...
// SettingViewController.m
// åˆ‡æ¢ä¸ºä¸­æ–‡
- (void)chineseClicked {
    [[NSUserDefaults standardUserDefaults] setObject:@&quot;zh-Hans&quot; forKey:@&quot;NEAppLanguage&quot;];
    // é‡ç½®rootViewController,è¾¾åˆ°é‡å¯appçš„ç›®çš„
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    [delegate resetMainVC];
}
// åˆ‡æ¢ä¸ºè‹±æ–‡
- (void)englishClicked {
    [[NSUserDefaults standardUserDefaults] setObject:@&quot;en&quot; forKey:@&quot;NEAppLanguage&quot;];
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    // é‡ç½®rootViewController,è¾¾åˆ°é‡å¯appçš„ç›®çš„
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    [delegate resetMainVC];
}
</code></pre>

<p>ä¸Šé¢çš„ä»£ç ä¸­,é¦–å…ˆæˆ‘ä»¬<code>undef</code>æ‰äº†ç³»ç»Ÿçš„å®<code>NSLocalizedString</code>,ç´§æ¥ç€æˆ‘ä»¬åˆé‡æ–°<code>define</code>äº†ä¸€ä¸ªåŒåçš„å®,åªä¸è¿‡è¿™æ¬¡è®©å®ƒå»è°ƒç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„æ–¹æ³•<code>localizedStringForKey</code>,
åœ¨è¿™ä¸ªè‡ªå®šä¹‰æ–¹æ³•é‡Œ,æˆ‘ä»¬é¦–å…ˆå»å‘å­˜å‚¨æŸ¥æ‰¾å½“å‰ç”¨æˆ·è®¾ç½®çš„Appè¯­è¨€,ç„¶åå»<code>mainBundle</code>ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰è¿™ä¸ªè¯­è¨€å¯¹åº”çš„<code>lproj</code>æ–‡ä»¶ã€‚å¦‚æœå­˜åœ¨,åˆ™ä½¿ç”¨è¯¥æ–‡ä»¶,å¦åˆ™äº¤ç»™ç³»ç»Ÿ(<code>mainBundle</code>)è‡ªå·±å»ç®¡ç†å†³å®šã€‚</p>

<p>æ¥ç€,å¯åŠ¨App,æµ‹è¯•è¯¥æ–¹æ¡ˆã€‚</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://qn.tomorjm.com/xib%E4%B8%8D%E6%AD%A3%E5%B8%B8.gif" alt="xibä¸æ­£å¸¸" class="lazyload"><figcaption class="image-caption">xibä¸æ­£å¸¸</figcaption></figure></p>

<p>çº³å°¼!åƒé²¸!ä¸åº”è¯¥å…¨æ˜¯æ­£å¸¸æ˜¾ç¤ºçš„å˜›!!!<code>ä¸ºå•¥ä»£ç è®¾ç½®çš„æ–‡æ¡ˆ,å®Œå…¨æ˜¾ç¤ºæ­£å¸¸ã€‚è€ŒxibåŠ è½½çš„å›½é™…åŒ–æ–‡æ¡ˆ,åˆ™ä¸ä¼šæ­£å¸¸æ˜¾ç¤º</code>ã€‚</p>

<p>ä¸”æ…¢,å…ˆè§£é‡Šä¸‹ä»£ç æ–‡æ¡ˆçš„åŠ è½½è¿‡ç¨‹ã€‚è¿™é‡ŒæˆåŠŸçš„å…³é”®æ˜¯æˆ‘ä»¬å¸®åŠ©åŸæœ¬ä¸æ¸…æ¥šå…·ä½“ä½¿ç”¨å“ªä¸ª<code>lproj</code>æ–‡ä»¶çš„ç³»ç»Ÿå®æ‰¾åˆ°äº†å…·ä½“çš„æ–¹å‘,è®©å®ƒä¸å†é çŒœå¯»è·¯ã€‚</p>

<p>é‚£<code>xib</code>ä¸ºä»€ä¹ˆä¼šå¼‚å¸¸å‘¢?ç»è¿‡ä¸€ç•ªç»†å¿ƒè°ƒè¯•,æœ€ç»ˆå‘ç°é—®é¢˜å‡ºç°åœ¨&hellip;</p>

<p><code>çœ‹é»‘æ¿!åˆ’é‡ç‚¹!</code></p>

<p>ä¹‹å‰è‡ªå®šä¹‰çš„å®è°ƒç”¨çš„æ–¹æ³•æ ¹æœ¬æ²¡æœ‰æ‰§è¡Œ!<code>xibä¸­çš„æ–‡æ¡ˆåŠ è½½,æ ¹æœ¬ä¸èµ°ç³»ç»Ÿå®!!!</code></p>

<p>å®ƒä»¬åº”è¯¥è°ƒç”¨çš„æ˜¯æ›´ååº•éƒ¨çš„æ¥å£,ä¹Ÿå°±æ˜¯è¯´æ›¿æ¢ç³»ç»Ÿå®å¯¹<code>Xib</code>å’Œ<code>Storyboard</code>æ ¹æœ¬æ— æ•ˆ,åªä¼šå¯¹ä»£ç è°ƒç”¨æœ‰æ•ˆã€‚</p>

<p>æ€»ç»“:è¿™ç§æ–¹æ¡ˆé€šè¿‡æ›¿æ¢ç³»ç»Ÿå®å®ç°,å¯¹äºé‚£äº›åºå¤§ä¸”ä½¿ç”¨çº¯ä»£ç è¿›è¡Œå›½é™…åŒ–å¤„ç†çš„é¡¹ç›®å¾ˆå®ç”¨,ä½†æ˜¯é‚£äº›æœ‰å¤šå¥—Xibå›½é™…åŒ–æ–¹æ¡ˆçš„é¡¹ç›®å°±å¤±æ•ˆäº†ã€‚</p>

<p>çœ‹æ¥æˆ‘ä»¬éœ€è¦ä¸€ç§æ›´åŠ å…¨é¢çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜!</p>

<h3 id="æ–¹æ¡ˆ3-åˆ©ç”¨runtimeå·§å¦™æ‹¦æˆª">æ–¹æ¡ˆ3: åˆ©ç”¨runtimeå·§å¦™æ‹¦æˆª</h3>

<p>ç»†å¿ƒçš„ä½ ä¼šå‘ç°,æ–¹æ¡ˆ2ä¸­æåˆ°çš„å››ç§å®æœ€ç»ˆéƒ½ä¼šç»Ÿä¸€è°ƒç”¨<code>NSBundle.h</code>çš„ä¸€ä¸ªæ–¹æ³•</p>

<pre><code class="language-objc">/* Method for retrieving localized strings. */
- (NSString *)localizedStringForKey:(NSString *)key value:(nullable NSString *)value table:(nullable NSString *)tableName;
</code></pre>

<p>è°ƒè¯•å‘ç°,ä¸ä»…ä»£ç è°ƒç”¨ä¼šåˆ°è¿™ä¸ªåœ°æ–¹,<code>xib</code>æ–‡ä»¶æœ€ç»ˆä¹Ÿä¼šæŒ‡å‘è¿™ä¸ªæ–¹æ³•,çœ‹æ¥æ­¤æ–¹æ³•åº”è¯¥å°±æ˜¯å›½é™…åŒ–è°ƒç”¨é¡ºåºçš„æœ€ç»ˆå»å‘ã€‚æ—¢ç„¶é‚£æ ·,ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½å¤Ÿåœ¨è¿™ä¸ªæœ€ç»ˆçš„æ–¹æ³•ä¸­è¿›è¡Œæ‹¦æˆª,è®©<code>bundle</code>æ­£ç¡®çš„å»åŠ è½½<code>lproj</code>æ–‡ä»¶å‘¢?</p>

<p>é¦–å…ˆ,æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹è¿™ä¸ªæ–¹æ³•å„ä¸ªå‚æ•°çš„å«ä¹‰:</p>

<ul>
<li><code>key</code>: éœ€è¦æœ¬åœ°åŒ–çš„å­—ç¬¦ä¸²å¯¹åº”çš„é”®å€¼</li>
<li><code>value</code>: é»˜è®¤å€¼,å¦‚æœæœ¬åœ°åŒ–èµ„æºæ–‡ä»¶ä¸­æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„ key åˆ™è¿”å›è¿™ä¸ªå€¼</li>
<li><code>tableName</code>: æŒ‡å®šåœ¨ç›¸åº”çš„lprojæ–‡ä»¶ä¸­çš„tableName.stringæ–‡ä»¶ä¸­æŸ¥æ‰¾æ–‡å­—èµ„æº,å¦‚æœä¼ å…¥<code>null</code>ï¼Œåˆ™åœ¨<code>Localizable.strings</code>ä¸­æŸ¥æ‰¾</li>
</ul>

<p>è¿™ä¸‰ä¸ªå‚æ•°è²Œä¼¼å¹¶ä¸æ˜¯æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿,å› ä¸ºä»–ä»¬ä¸èƒ½å†³å®šå…·ä½“<code>lproj</code>åˆ°åº•æ˜¯å“ªä¸ª?è€Œæ­¤æ–¹æ³•åˆæ˜¯<code>NSBundle</code>çš„å¯¹è±¡æ–¹æ³•,äº‹å®ä¸Šç³»ç»Ÿè°ƒç”¨åˆ°è¿™ä¸ªåœ°æ–¹çš„æ—¶å€™,å…¶å®å·²ç»åšå‡ºäº†å†³å®šåˆ°åº•ä½¿ç”¨çš„æ˜¯å“ªä¸ª<code>lproj</code>(å…¶å®å°±æ˜¯è¯¥æ–¹æ³•çš„è°ƒç”¨è€…)ã€‚</p>

<p>é‚£ä¹ˆ,å¦‚ä½•å·§å¦™çš„ç»•è¿‡è¿™ä¸ªå‘,è®©æ­¤æ–¹æ³•çš„è°ƒç”¨è€…è°ƒç”¨å¤±æ•ˆåˆé‡æ–°æŒ‡å®šè°ƒç”¨å‘¢?</p>

<p>å¯¹,ä½¿ç”¨<code>Runtime</code>!</p>

<p>æˆ‘ä»¬å¯ä»¥è¿™æ ·åš,è‡ªå®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ª<code>NSBundle</code>çš„å­ç±»,æˆ‘ä»¬ç§°å®ƒä¸º<code>LanguageBundle</code>,åœ¨è¿è¡Œæ—¶åˆ©ç”¨<code>object_setClass</code>å°†<code>NSBundle</code>æ›¿æ¢ä¸º<code>LanguageBundle</code>
åœ¨è¿™ä¸ª<code>LanguageBundle</code>ä¸­é‡å†™ä¸Šé¢çš„é‚£ä¸ª<code>localizedStringForKey</code>æ–¹æ³•,ç„¶ååœ¨è¿™ä¸ªé‡å†™çš„æ–¹æ³•é‡Œæ‹¦æˆªç³»ç»Ÿçš„è°ƒç”¨ã€‚è¿™ä¸ª<code>LanguageBundle</code>çš„ä½œç”¨å¦‚ä¸‹:</p>

<ul>
<li>æ›¿æ¢<code>NSBundle</code>,è®©åŸæœ¬æ˜¯<code>localizedStringForKey</code>çš„è°ƒç”¨è€…çš„<code>NSBundle</code>,æ¢ä¸ºäº†<code>LanguageBundle</code></li>
<li><code>LanguageBundle</code>æœ¬èº«åˆæ˜¯<code>NSBundle</code>çš„å­ç±»,ç»§æ‰¿äº†åŒ…æ‹¬<code>localizedStringForKey</code>åœ¨å†…çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•,é‚£ä¹ˆè¯¥æ›¿æ¢çš„ä¾µå®³æ€§å¯ä»¥ä¸è®¡</li>
<li>åœ¨è°ƒç”¨åˆ°<code>localizedStringForKey</code>çš„æ—¶å€™,å¯ä»¥å¯¹å…¶å®ç°é«˜åº¦å®šåˆ¶,åŒæ—¶åˆå¯ä»¥è®©å…¶çˆ¶ç±»<code>NSBundle</code>ä¾æ—§æ‰§è¡Œè¯¥æ–¹æ³•,åªéœ€<code>super</code>è°ƒç”¨å³å¯</li>
</ul>

<p>åŒæ ·è¿˜æ˜¯ç³»ç»Ÿä¸ºè‹±æ–‡çš„æƒ…å†µ,å…·ä½“ä»£ç å¦‚ä¸‹:</p>

<pre><code class="language-objc">// AppDelegate.m
#import &lt;objc/runtime.h&gt;
#import &quot;LanguageBundle.h&quot;
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    object_setClass([NSBundle mainBundle], [LanguageBundle class]);
    return YES;
}

...

// LanguageBundle.m
- (NSString *)localizedStringForKey:(NSString *)key value:(NSString *)value table:(NSString *)tableName{
    NSBundle *bundle = [NSBundle mainBundle];
    NSString *currentLanguage = [[NSUserDefaults standardUserDefaults] objectForKey:@&quot;NEAppLanguage&quot;]; // ä»å­˜å‚¨ä¸­å–å€¼
    NSString *path = [bundle pathForResource:currentLanguage ofType:@&quot;lproj&quot;];
    if (path) {
        return [[NSBundle bundleWithPath:path] localizedStringForKey:key value:value table:tableName];
    } else {
        return [super localizedStringForKey:key value:value table:tableName];
    }
}

// SettingViewController.m
// åˆ‡æ¢ä¸ºä¸­æ–‡
- (void)chineseClicked {
    [[NSUserDefaults standardUserDefaults] setObject:@&quot;zh-Hans&quot; forKey:@&quot;NEAppLanguage&quot;];
    // é‡ç½®rootViewController,è¾¾åˆ°é‡å¯appçš„ç›®çš„
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    [delegate resetMainVC];
}
// åˆ‡æ¢ä¸ºè‹±æ–‡
- (void)englishClicked {
    [[NSUserDefaults standardUserDefaults] setObject:@&quot;en&quot; forKey:@&quot;NEAppLanguage&quot;];
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    // é‡ç½®rootViewController,è¾¾åˆ°é‡å¯appçš„ç›®çš„
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    [delegate resetMainVC];
}

</code></pre>

<p>å†æ¬¡è¿è¡ŒApp,æŒ‰é’®çŠ¶æ€å¦‚ä¸‹:</p>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://qn.tomorjm.com/%E4%B8%AD%E8%8B%B1%E6%96%87%E5%88%87%E6%8D%A2%E6%AD%A3%E5%B8%B8.gif" alt="ä½¿ç”¨runtime" class="lazyload"><figcaption class="image-caption">ä½¿ç”¨runtime</figcaption></figure></p>

<p>æ˜¾ç¤ºæ­£å¸¸!</p>

<p>åˆç»è¿‡ä¸€ç•ªè°ƒè¯•å‘ç°,æ— è®ºæ˜¯<code>ä»£ç </code>è¿˜æ˜¯<code>Xib</code>,æœ€ç»ˆéƒ½ä¼šè°ƒç”¨åˆ°<code>LanguageBundle</code>ä¸­é‡å†™çš„æ–¹æ³•<code>localizedStringForKey</code>ä¸­å»ã€‚ç¬¬äºŒç§æ–¹æ¡ˆé‡åˆ°çš„é—®é¢˜éƒ½å®Œç¾è§£å†³!</p>

<p>æ€»ç»“:è¿™ç§æ–¹æ¡ˆæ¯”è¾ƒtrick,èƒ½é€‚ç”¨å„ç§åœºæ™¯,ä»£ç ä¾µå…¥æ€§å°ä¸”æ•ˆæœå®Œç¾(å¯¹çº¯ä»£ç å’ŒXibéƒ½ä¼šç”Ÿæ•ˆ),éå¸¸æ¨èè¿™ç§æ–¹æ¡ˆ!</p>

<h2 id="å¯èƒ½ä¼šé‡åˆ°çš„å‘">å¯èƒ½ä¼šé‡åˆ°çš„å‘</h2>

<h3 id="1-å„ä¸ªiosç‰ˆæœ¬ä¸­çš„åœ°åŒºä»£ç å·®å¼‚">1ã€å„ä¸ªiOSç‰ˆæœ¬ä¸­çš„åœ°åŒºä»£ç å·®å¼‚</h3>

<pre><code class="language-objc">iOS9ä¹‹å‰:
zh-Hans: ç®€ä½“
zh-Hant: ç¹ä½“

iOS9ä¹‹å:
zh-Hans-CN: ç®€ä½“ï¼ˆæ”¹å˜ï¼‰
zh-Hant-CN: ç¹ä½“ï¼ˆæ”¹å˜ï¼‰
</code></pre>

<p>å¦‚ä¸Šæ‰€ç¤ºåœ¨<code>iOS9</code>ä¹‹å,åœ°åŒºä»£ç å‘ç”Ÿäº†æ”¹å˜ä¾‹å¦‚ç®€ä½“ä¸­æ–‡åœ¨<code>iOS9</code>ä¹‹å‰ä¸º<code>zh-Hans</code>,è€ŒiOS9ä¹‹åä¸º<code>zh-Hans-CN</code>,åé¢çš„<code>CN</code>ä¸ºå…·ä½“åœ°åŒºä»£ç ã€‚
æ‰€ä»¥åœ¨æ‹¿åˆ°<code>currentLanguage</code>è¿”å›æ˜¯zh-Hans-CN,è¿™æ—¶å€™ä¼šæ‰¾ä¸åˆ°å¯¹åº”çš„bundleæ–‡ä»¶,å› ä¸ºæœ¬åœ°çš„æ–‡ä»¶å¤¹åå­—è¿˜æ˜¯zh-Hansï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡<code>NSString</code>çš„<code>hasPrefix:</code>æ–¹æ³•,æ‰€ä»¥åœ¨æ‹¿åˆ°currentLanguageçš„æ—¶å€™å…ˆè¿›è¡Œä¸€æ­¥åˆ¤æ–­,å†è¿”å›<code>zh-Hans</code>ã€‚</p>

<h3 id="2-ä½¿ç”¨staticåˆå§‹åŒ–çš„nsstring">2ã€ä½¿ç”¨staticåˆå§‹åŒ–çš„NSString</h3>

<p>å¦‚æœä½ çš„é¡¹ç›®é‡Œé¢æœ‰å¾ˆå¤šè¿™æ ·çš„<code>NSString</code>å£°æ˜æ–¹å¼,å°±åº”è¯¥å°å¿ƒäº†,ä¾‹å¦‚ä¸‹é¢è¿™æ®µä»£ç </p>

<pre><code class="language-objc">// ViewController.m
static NSString *buttonTitleText;
...
- (void)viewDidLoad {
    [super viewDidLoad];
    buttonTitleText = NSLocalizedString(@&quot;é‚®ç®±å¤§å¸ˆ&quot;, @&quot;&quot;);
    [self.changeBtn setTitle:buttonTitleText forState:UIControlStateNormal];
}
</code></pre>

<p>åœ¨è¿™ç§åˆå§‹åŒ–æ–¹å¼ä¸‹,<code>buttonTitleText</code>åªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚å› æ­¤æ— è®ºå¦‚ä½•åˆ‡æ¢è¯­è¨€,è¯¥å˜é‡ä¾æ—§æ˜¯ç¬¬ä¸€æ¬¡åˆå§‹åŒ–çš„å€¼,é€ æˆå¤šè¯­è¨€åˆ‡æ¢æ•ˆæœå¤±æ•ˆã€‚
æ‰€ä»¥å¦‚æœç¡®å®è¦ä¿æŒç»Ÿä¸€çš„è¯,æˆ‘æ¯”è¾ƒæ¨èä½¿ç”¨å®çš„å½¢å¼ã€‚</p>

<pre><code class="language-objc">#define buttonTitleText NSLocalizedString(@&quot;é‚®ç®±å¤§å¸ˆ&quot;, @&quot;&quot;)
</code></pre>

<h2 id="ä¸é‡å¯appçš„uiæ–‡æ¡ˆåˆ·æ–°æœºåˆ¶">ä¸é‡å¯Appçš„UIæ–‡æ¡ˆåˆ·æ–°æœºåˆ¶</h2>

<p>éœ€è¦çŸ¥é“çš„æ˜¯,å¦‚æœä¸€ä¸ªæ§ä»¶çš„æ–‡æ¡ˆå·²ç»è¢«åŠ åˆ°å†…å­˜äº†,é‚£ä¹ˆé™¤éå†é‡æ–°è®¾ç½®è¯¥æ§ä»¶æ–‡æ¡ˆ,å¦åˆ™å®ƒæ˜¯ä¸ä¼šå†æ”¹å˜çš„ã€‚</p>

<p>ä¾‹å¦‚åœ¨ä¸€ä¸ªcontrollerä¸­,è¿™æ ·è®¾ç½®</p>

<pre><code class="language-objc">- (void)viewDidLoad {
    [super viewDidLoad];
    [self.changeBtn setTitle:NSLocalizedString(@&quot;é‚®ç®±å¤§å¸ˆ&quot;, @&quot;&quot;)  forState:UIControlStateNormal];
}
</code></pre>

<p>æ­¤æ—¶ä½ å†pushåˆ°å¦ä¸€ä¸ªcontrollerä¸­è¿›è¡Œè¯­è¨€çš„åˆ‡æ¢ã€‚è¿™æ—¶å€™ä½ å›åˆ°è¯¥ç•Œé¢,è¿™ä¸ªbuttonçš„æ–‡æ¡ˆä¸ä¼šå˜åŒ–ã€‚åŸå› å°±æ˜¯è¯¥buttonçš„æ–‡æ¡ˆè®¾ç½®å·²ç»è¢«åŠ è½½åˆ°å†…å­˜ä¸­å»ã€‚</p>

<p>é‚£ä¹ˆè¯¥é—®é¢˜å¦‚ä½•è§£å†³å‘¢?</p>

<h3 id="1-å‘é€é€šçŸ¥">1ã€å‘é€é€šçŸ¥</h3>

<p>åœ¨å¤šè¯­è¨€åˆ‡æ¢çš„ä½ç½®<code>å‘é€é€šçŸ¥</code>,ç„¶åæ‰€æœ‰å¯èƒ½åœ¨å†…å­˜ä¸­çš„controlleræ³¨å†Œç›‘å¬è¿™ä¸ªé€šçŸ¥,è°ƒç”¨åˆ·æ–°æ–¹æ³•,é‡æ–°è®¾ç½®æ§ä»¶æ–‡æ¡ˆã€‚ä¾‹å¦‚:</p>

<pre><code class="language-objc">// ViewController.m
- (void)viewDidLoad {
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(refreshUI) name:@&quot;AppLanguageChangeSender&quot; object:nil];
    [self.changeBtn setTitle:buttonTitleText forState:UIControlStateNormal];
}

- (void)refreshUI
{
    [self.changeBtn setTitle:buttonTitleText forState:UIControlStateNormal];
}

...

// LanguageManager.m
// æ­¤ç±»æ§åˆ¶å¤šè¯­è¨€åˆ‡æ¢
- (void)languageChangeFinished
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@&quot;AppLanguageChangeSender&quot; object:nil];
}
</code></pre>

<p>è¿™æ ·çš„è¯,éœ€è¦åœ¨æ¯ä¸ªå¯èƒ½ä½äºå†…å­˜ä¸­çš„controllerä¸­éƒ½è¿™æ ·å†™,å¦‚æœé¡¹ç›®åºå¤§çš„è¯,ç»´æŠ¤æ€§éå¸¸å·®,ä¸æ¨èè¿™æ ·åšã€‚</p>

<h3 id="2-é‡å¯rootcontroller">2ã€é‡å¯rootController</h3>

<p>è¿˜å¯ä»¥è¿™æ ·åš,ä¾‹å¦‚æˆ‘ä¸Šé¢å„ä¸ªæ–¹æ¡ˆä¸­çš„åˆ·æ–°æ–¹å¼,<code>AppDelegate</code>ä¸­å¼€æ”¾ä¸€ä¸ªæ¥å£<code>- (void)resetMainVC</code>,åœ¨åˆ‡æ¢è¯­è¨€å®Œæˆåè°ƒç”¨è¯¥æ–¹æ³•</p>

<pre><code class="language-objc">// AppDelegate.m
- (void)resetMainVC
{
    self.window.rootViewController = nil;
    ViewController *mainVC = [[ViewController alloc] init];
    self.window.rootViewController = [[UINavigationController alloc] initWithRootViewController:mainVC];
}

// LanguageManager.m
// æ­¤ç±»æ§åˆ¶å¤šè¯­è¨€åˆ‡æ¢
- (void)languageChangeFinished
{
    AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    [delegate resetMainVC];
}
</code></pre>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>å¦‚æœè¦è¾¾åˆ°æ›´å¥½çš„æ•ˆæœ,å»ºè®®åˆ›å»ºä¸€ä¸ªä¸“é—¨ç®¡ç†Appè¯­è¨€åˆ‡æ¢çš„å•ä¾‹ç±»,åœ¨è¯­è¨€åˆ‡æ¢å®Œæˆå,UIæ–‡æ¡ˆçš„åˆ·æ–°æœºåˆ¶ä¹Ÿåº”è¯¥é’ˆå¯¹è‡ªå·±çš„é¡¹ç›®åˆç†çš„è¿›è¡Œè®¾è®¡ã€‚æœ¬æ–‡åªæ˜¯èµ·åˆ°ä¸€ä¸ªæŠ›ç –å¼•ç‰çš„ä½œç”¨,æƒ³è¦å°†è¯¥åŠŸèƒ½è®¾è®¡å¾—æ›´å®Œç¾,è¿˜æ˜¯éœ€è¦å¤šåŠ å®Œå–„çš„ã€‚</p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>JaimeZhang </span>
                </p>
            
           
            <p class="copyright-item">
                    <span>Words:</span>
                   <span>5559</span>
            </p>
            
            <p class="copyright-item">
                
                <span>Share:</span>
                <span>

      
        <a href="//twitter.com/share?url=http%3a%2f%2fwww.tomorjm.com%2fios-multi-language%2f&amp;text=iOS%e5%ba%94%e7%94%a8%e5%86%85%e5%a4%9a%e8%af%ad%e8%a8%80%e5%88%87%e6%8d%a2%e7%9a%84%e5%a5%87%e6%80%9d%e5%a6%99%e6%83%b3&amp;via=" target="_blank" title="Share on Twitter">
          <i class="iconfont icon-twitter"></i>
        </a>
        
      
      
        <a href="//www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fwww.tomorjm.com%2fios-multi-language%2f" target="_blank" title="Share on Facebook">
          <i class="iconfont icon-facebook"></i>
        </a>
        
      
      
      
      
        <a href="//www.linkedin.com/shareArticle?url=http%3a%2f%2fwww.tomorjm.com%2fios-multi-language%2f&amp;title=iOS%e5%ba%94%e7%94%a8%e5%86%85%e5%a4%9a%e8%af%ad%e8%a8%80%e5%88%87%e6%8d%a2%e7%9a%84%e5%a5%87%e6%80%9d%e5%a6%99%e6%83%b3" target="_blank" title="Share on LinkedIn">
          <i class="iconfont icon-linkedin"></i>
        </a>
        
      
      
        
      
        
      

          

          

          
        <a href="//www.douban.com/recommend/?url=http%3a%2f%2fwww.tomorjm.com%2fios-multi-language%2f&amp;title=iOS%e5%ba%94%e7%94%a8%e5%86%85%e5%a4%9a%e8%af%ad%e8%a8%80%e5%88%87%e6%8d%a2%e7%9a%84%e5%a5%87%e6%80%9d%e5%a6%99%e6%83%b3" target="_blank" title="Share on Douban ">
            <i class="iconfont icon-douban"></i>
          </a>
          

          
        <a href="//service.weibo.com/share/share.php?url=http%3a%2f%2fwww.tomorjm.com%2fios-multi-language%2f&amp;appkey=&amp;title=iOS%e5%ba%94%e7%94%a8%e5%86%85%e5%a4%9a%e8%af%ad%e8%a8%80%e5%88%87%e6%8d%a2%e7%9a%84%e5%a5%87%e6%80%9d%e5%a6%99%e6%83%b3" target="_blank" title="Share on Douban ">
            <i class="iconfont icon-weibo"></i>
          </a>
          
</span>
                
            </p>

             
            <p class="copyright-item">
                Released under <a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a>
            </p>
            
    </div>

  
    <div class="post-tags">
        
        <section>
                <a href="javascript:window.history.back();">Back</a></span> Â· 
                <span><a href="http://www.tomorjm.com">Home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="http://www.tomorjm.com/xcodeproj-2/" class="prev" rel="prev" title="é€šè¿‡Xcodeprojæ·±å…¥æ¢ç©¶Xcodeå·¥ç¨‹æ–‡ä»¶ äºŒ"><i class="iconfont icon-dajiantou"></i>&nbsp;é€šè¿‡Xcodeprojæ·±å…¥æ¢ç©¶Xcodeå·¥ç¨‹æ–‡ä»¶ äºŒ</a>
         
        
        <a href="http://www.tomorjm.com/learn-graphql-java/" class="next" rel="next" title="å¼€å§‹ä½¿ç”¨GraphQL Javaå’ŒSpring Boot">å¼€å§‹ä½¿ç”¨GraphQL Javaå’ŒSpring Boot&nbsp;<i class="iconfont icon-xiaojiantou"></i></a>
        
    </div>

    <div class="post-comment">
          
          <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'yourdiscussshortname';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  

 


          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">1994 - 2019</span>
        
          <span> | TomorJM â¤ï¸</span>

    </div>
</footer>













    
     <link href="//lib.baomitu.com/lightgallery/1.6.12/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  







     </div>
  </body>
</html>
